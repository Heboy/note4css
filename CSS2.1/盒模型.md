#盒模型（Box model）
---
[翻译参考这里](http://www.cnblogs.com/-Milo/archive/2010/12/28/2873637.html)

[英文原版点击这里](http://dev.w3.org/csswg/css2/box.html)

##1. 盒子的大小（Box dimensions）

每一个盒子都包含一个内容区域（例如文本，图片等等）和围绕在内容周围的可选padding, border, 和 margin区域；每个区域的大小由下面定义的属性来指定。下图说明了这些区域之间的关系和用于表示margin, border, 和 padding每一部分的术语：

![](../img/boxdim.png)


margin, border, 和 padding都可以分为top, right, bottom, 和 left四部分（例如，在上图中，"LM"表示左边的margin，"RP" 表示右边的padding, "TB" 表示顶部的border,等等）。

四个区域(content, padding, border, 和 margin)每部分的周长被称作边缘，所以每个盒子有四个边缘：

**内容区域的边缘**

内容区域的边缘围绕在由盒子的高度和宽度组成的矩形周围，它常常依赖于元素所渲染的内容。四个内容区域的边缘定义了内容盒子。

**内部填充区域的边缘**

内部填充区域的边缘围绕在盒子的内部填充区域周围。如果内部填充宽度为0，那么内部填充区域的边缘就是内容区域的边缘。四个填充区域的边缘定义了内部填充盒子。

**边框的边缘**

边框的边缘围绕在盒子的边框周围。如果边框的宽度为0，那么边框的边缘就是内部填充区域的边缘。四个边框的边缘定义了边框盒子。

**外部填充区域的边缘**

外部填充区域的边缘围绕在盒子的外部填充周围。如果外部填充区域的宽度为0，那么外部填充区域的边缘就是边框的边缘。四个外部填充区域的边缘定义了外部填充盒子。

每一个边缘都可以分为上，右，下，左四个部分。

一个盒子的内容区域的大小——内容的宽度和内容的高度——取决于几个因素：生成盒子的元素是否设置了宽度和高度，盒子是否包含文本或其他盒子，盒子是否是一个table，等等。盒子的宽度和高度将在visual formatting model details中讨论。

一个盒子的内容区域，内部填充区域和宽度区域的background样式将在所生成元素的'background'属性中描述。

##2. 举例说明边框区域，内部和外部填充区域

###2.1 外部填充区域的属性

Margin属性指定了一个盒子的外部填充区域的宽度。'margin'简写属性可以同时设置四个部分的外部填充区域，而其他的margin属性只能设置各自的外部填充区域。这些属性可以应用到所有元素，但是垂直的margins在不可替换行内元素上不会起作用。

Margin属性允许负值，但是会有些特殊实现的限制。

margin属性为盒模型提供margin区域的宽度。

margin可以简写：

	{
		margin:10px 11px 12px 13px; 
	}
分别定义上、右、下、左的margin宽度

	{
		margin:10px 11px;
	}
分别定义上下、左右的margin宽度

	{
		margin:10px;
	}
定义四个方向上的margin宽度

	{
		margin:10px 11px 12px;
	}
分别定义上、左右、下的margin宽度

###2.1.1 外边距折叠（Collapsing margins）

在本章中，外部填充区域的折叠指的是两个或两个以上的盒子的相邻外部填充区域（内容为非空，没有内部填充区域和边框，或者没有清除元素来分隔它们）合并为一个填充区域。

CSS2.1中，水平的外部填充区域永远不会发生折叠。

在某些盒子中垂直的外部填充区域可能会发生折叠：

- 在普通文档流中，两个或两个以上块级盒子的垂直外部填充区域会发生折叠。折叠后外部填充区域的宽度为这个两个相邻垂直外部填充区域宽度中最大的一个。如果存在负值，折叠后的宽度等于正的外部填充区域宽度减去负的外部填充区域宽度的绝对值。若果没有正值，折叠后的外部填充区域宽度等于0减去绝对值最大的外部填充区域宽度。注意生成相邻盒子的元素之间可能没有兄弟关系或者祖孙关系。


- 一个浮动盒子的垂直外部填充区域不会与其他任何盒子的垂直外部填充区域发生折叠（甚至是一个浮动元素和其在普通文档流内的子元素之间也不会发生折叠）。


- 一个创建了新块级格式化环境（比如浮动元素或拥有'overflow'属性且值为'visible'以外其他值的元素）的元素垂直外部填充区域不会与在其在同一文档流内的子元素发生折叠。


- inline-block元素的外部填充区域不会发生折叠（即使与其普通文档流内的子元素也不会发生折叠）。


- 如果一个盒子的顶部和底部的外部填充区域相邻，那么其外部填充区域可能会穿过它。这种情况，该元素的位置取决于它与其他折叠元素之间的关系。


	- 如果元素的外部填充区域与它的父元素顶部填充区域发生了折叠，那么这个盒子的顶部边框就是其父元素的顶部边框。
	
	
	-  否则，要么元素的父元素没有参与折叠，要么只有其父元素的底部外部填充区域参与了折叠。如果该元素底部边框宽度非零，那么这个元素顶部边框区域的位置将正常显示。


一个元素如果拥有清除元素，那么该元素的顶部外部填充区域与其父元素的底部填充区域也不会发生折叠。

注意：已穿透折叠元素的位置不会对其他折叠元素的位置有任何影响；

在普通文档流中的块级元素的底部外部填充区域总是与其下一个在普通文档流中的兄弟块级元素相邻，除非该相邻兄弟元素可以清除浮动。

如果一个在普通文档流中的块级元素没有顶部边框和顶部内部填充且其同一文档流中的子元素没有清除浮动，那么该元素的顶部外部填充区域与其子元素的顶部外部填充区域相邻。

如果一个在普通文档流中的块级元素没有底部内部填充区域和边框且该元素'height' 为 'auto'，那么该元素的底部外部填充区域将与其在同一文档流内的最后一个块级子元素的底部外部填充区域相邻。

如果一个元素的'min-height'属性值为0，它既没有顶部或底部边框也没有顶部或底部内部填充，它的'height'属性值为0或'auto'，它不包含一个行级盒子，而且所有普通文档流内的子元素的外部填充区域都互相连接，那么该元素本身的外部填充区域也互相连接。

当一个元素的外部填充区域发生折叠，这个元素有清除浮动，且它的顶部外部填充区域与其后相邻元素连接的外部填充区域也发生折叠，但是结果将导致折叠后的外部填充区域不会与其父元素的底部填充区域发生折叠。

折叠基于'padding', 'margin', 和 'border'的使用值（也就是在百分比解析之后的值）。折叠将通过各种外部填充区域的使用值来计算。

###2.2 内部填充区域属性

Padding属性指定了一个字的内部填充区域的宽度。'padding'简写属性可以设置四个部分的内部填充区域，而其他的padding属性只能设置相应的一个内部填充区域。

缩写规则和margin一样。

内部填充区域的颜色或图像将通过'background'属性来指定。

###2.3 边框属性

Border属性指定了一个盒子边框区域的宽度，颜色和样式。这些属性可以应用到所有元素。

说明：对于HTML中的某些用户界面元素（例如按钮，菜单等等）和普通元素，浏览器的渲染效果可能会不同。

边框宽度，颜色，样式在这里忽略。

##3. 在上下环境中行内元素的盒模型

对于每一个行状盒子，浏览器必须为其中的每个元素生成一个行内盒子，然后按照显示顺序渲染他们的外部填充区域，边框和内部填充区域（不是逻辑上顺序）。

这里主要涉及到一些语言从右往左阅读的情况。