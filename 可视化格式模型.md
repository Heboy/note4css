#可视化格式模型
[英文原版点击这里](http://dev.w3.org/csswg/css2/visuren.html)
##box
Box 是 CSS 布局的对象和基本单位， 直观点来说，就是一个页面是由很多个 Box 组成的。元素的类型和 display 属性，决定了这个 Box 的类型。 不同类型的 Box， 会参与不同的 Formatting Context（一个决定如何渲染文档的容器），因此Box内的元素会以不同的方式渲染。让我们看看有哪些盒子：

- block-level box：display 属性为 block, list-item, table 的元素，会生成 block-level box。并且参与 block fomatting context；

- inline-level box：display 属性为 inline, inline-block, inline-table 的元素，会生成 inline-level box。并且参与 inline formatting context；

##包含块（Containing blocks）

在CSS2.1中，很多box的位置和尺寸都是根据一个叫做包含块的矩形框的边缘计算的，通常情况下，已生成的box作为后代box的包含块，也就是说一个盒子为他的后代创建包含块。a box's containing block表示box所在的containing block，不是说它生成的。

每个box都根据它的containing block设置位置，但它不局限在这个containing block里，它可能超出（overflow）。

关于containing block如何计算尺寸将在下一节介绍。

##控制包含框的生成
我们在这一节讨论几种box的类型。

在某种程度上，box的类型影响它在可视化格式模型中的表现。display影响box的类型。

display的某些值使元素生成一个包含后代box和内容的principal box，这些额外的box根据principal box放置。

###principal box
字面翻译是主盒。个人理解，如果元素没有产生额外的box，那么principal box就是box。或者说是最外层的box。

###块元素和 Block box

**块元素**生成块级框(block-level box)。元素的display为block，list-item，table时元素变为块元素。块级框参与BFC。

在CSS2.1中，block-level box也是block container box，除非box是table box或者是可替换元素的box，block container box可以包含block-level boxes或创建一个inline formatting context来包含inline-level boxes。当display为'block', 'list-item', 'inline-block'时，会使得非替换元素产生一个block container，并不是所有的block container box都是block-level box:非替换内联元素和非替换table cells是block containers但不是block-level box。Block-level box如果也是block container的话我们称为block boxes。

当然了，"block-level box," "block container box,"  "block box"有时候叫都称为block。

######Anonymous block boxes

看上去没什么用，举个例子：
	
	<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
	<HEAD>
	    <TITLE>Anonymous text interrupted by a block</TITLE>
	    <style>
	       div {
	           width: 200px;
	           border: 1px solid gold;
	       }
	 
	       span {
	           border: 1px solid red;
	       }
	 
	       p {
	           width: 100px;
	           border: 1px solid green;
	       }
	    </style>
	</HEAD>
	<BODY>
	    <div>
	       <span>This is anonymous text before the P.
	           <P>This is the content of P.</P>
	             This is anonymous text after the P.
	       </span>
	    </div>
	</BODY>
	</HTML>

span中插入了block元素p，表现形式如图所示：

![](/img/01.png)

###内联元素和 inline box
**内联元素**在一行显示，display属性为'inline', 'inline-table', 'inline-block'时元素为内联元素。内联元素生成inline-level boxes，参与inline formatting context。
	
###display属性

- block

	该值使元素生成一个principal block box
- inline-block

	该值使元素生成一个principal inline-level block container
- inline

	该值使元素生成一个或多个inline box
- list-item

	该值使元素生成一个principal block box和一个marker box
- none

	元素不显示在格式结构中，后代元素不生成任何box
- table, inline-table, table-row-group, table-column, table-column-group, table-header-group, table-footer-group, table-row, table-cell, and table-caption

	使元素表现的像table元素

##定位机制

在CSS2.1中，box可以根据三种定位机制进行布局。

1. 正常流

	
1. 浮动

	[浮动规则在这里](浮动与定位.md)
1. 绝对定位
	
	[定位规则在这里](浮动与定位.md)

##正常流
正常流中的box属于格式上下文（formatting context）,在CSS2.1中可能是table，block或inline。Block-level box参与BFC，Inline-level box参与IFC，[table参见这里](http://dev.w3.org/csswg/css2/tables.html)

###BFC

浮动，绝对定位元素，不是block box的block container以及overflow不为visible的block box将为其内容建立新的BFC。

[详细看这里](BFC.md)

###IFC
[
IFC中的元素排列规则在这里](行内元素的大小与边距.md)